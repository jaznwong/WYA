(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t){},179:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(16),o=n.n(s),c=(n(94),n(96),n(7)),i=n(8),l=n(11),u=n(9),m=n(10),p=n(180),h=n(185),f=n(6),d="AUTH_USER",v="LOGOUT",g="SUGGEST_INTEREST",b="SET_USER_INTEREST",E="SET_USER_AVAILABILITY",y="UPDATE_DISPLAY_ROOMS",w="UPDATE_USERS_IN_ROOM",O="SET_ROOM_STATUS",j="SET_ROOM_INFORMATION",N="SET_ROOM_SUGGESTION",k="VOTE_FOR_OPTION",x="CONNECT_TO_SOCKET",S=n(4),C=n.n(S),D=n(13),I="https://wya-backend.herokuapp.com",T=n(38),R=n.n(T);R.a.defaults.withCredentials=!0;var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,a){var r=I+e;R.a.post(r,t).then(function(e){n(e)}).catch(function(e){a(e)})})},_=function(e){return new Promise(function(t,n){var a=I+e;R.a.get(a).then(function(e){t(e.data)}).catch(function(e){n(e)})})},A="/auth";function U(){return(U=Object(D.a)(C.a.mark(function e(t,n,a,r){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("".concat(A,"/signup"),{firstname:t,lastname:n,username:a,password:r});case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),"Error signing up";case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function M(){return(M=Object(D.a)(C.a.mark(function e(t,n){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("".concat(A,"/login"),{username:t,password:n});case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),"Error logging up";case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function L(){return(L=Object(D.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(A,"/logout"),e.next=4,P(t);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),"error logging out";case 10:case"end":return e.stop()}},e,this,[[0,7]])}))).apply(this,arguments)}function V(){return(V=Object(D.a)(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/user/who_am_i",e.next=4,_("/user/who_am_i");case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),"error getting who am i";case 10:case"end":return e.stop()}},e,this,[[0,7]])}))).apply(this,arguments)}function F(e){return{type:d,userData:e}}function G(){return function(){return L.apply(this,arguments)}().then(function(e){var t=e.message;console.log(t)}),{type:v}}var q=function(e){var t=e.item,n=t.name,a=t.href;return r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:a},n))},H=function(e){var t=e.isAuthenticated,n=e.handleLogout,a=r.a.createElement("ul",{className:"navbar-nav nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{to:"/room/create",className:"nav-link"},"Create")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{to:"/profile/edit",className:"nav-link"},"Profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#",onClick:n},"Logout")));return t?a:r.a.createElement("ul",{className:"navbar-nav nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{to:"/auth/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{to:"/auth/signup",className:"nav-link"},"Signup")))},J=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleLogout",value:function(e){e.preventDefault(),this.props.logout(),this.props.history.push("/")}},{key:"render",value:function(){var e=this.props.isAuthenticated,t=[{name:"Active",href:"#"},{name:"Saved",href:"#"},{name:"Recent",href:"#"}].map(function(e,t){return r.a.createElement(q,{item:e,key:"navitem-"+t})});return r.a.createElement("nav",{id:"nav",ref:"table",className:"navbar navbar-expand-lg navbar-dark bg-dark",style:{paddingTop:"0.3rem",paddingBottom:"0.3rem"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement(p.a,{id:"nav-title",className:"navbar-brand",to:"/"},"WYA \ud83d\udc40")),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},r.a.createElement("ul",{className:"navbar-nav"},t)),r.a.createElement(H,{isAuthenticated:e,handleLogout:this.handleLogout.bind(this)}),r.a.createElement("div",null)))}}]),t}(a.Component);var W=Object(h.a)(Object(f.b)(function(e){return{isAuthenticated:e.user.isAuthenticated}},function(e){return{logout:function(){e(G())}}})(J)),Y=n(78),B=n.n(Y),K="http://localhost:8000/";var z=n(184),X=n(181),$=n(183),Q=n(20),Z=n(47),ee=n.n(Z),te=function(){return r.a.createElement("div",{style:{width:"100%",height:"auto",bottom:"0px",top:"50px",left:"0",position:"absolute"}},r.a.createElement("div",{style:{position:"absolute",width:"100px",height:"50px",top:"50%",left:"50%",marginLeft:"-50px",marginTop:"-25px"}},r.a.createElement(ee.a,{type:"bars",color:"grey",height:"100%",width:"100%"})))},ne=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(Q.a)({},e.target.name,e.target.value))},n.handleSignup=Object(D.a)(C.a.mark(function e(){var t,a,r,s,o;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.state,a=t.firstname,r=t.lastname,s=t.username,o=t.password,e.next=4,n.props.signupUser(a,r,s,o);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])})),n.handleLogin=Object(D.a)(C.a.mark(function e(){var t,a,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.state,a=t.username,r=t.password,e.next=4,n.props.loginUser(a,r);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,7]])})),n.state={warningMessage:"",loader:!1,firstname:"",lastname:"",username:"",password:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({loader:!0}),(this.props.signup?this.handleSignup:this.handleLogin)().then(function(){t.setState({warningMessage:"",loader:!1}),t.props.history.push("/")}).catch(function(e){t.setState({warningMessage:"Invalid Username/Password",loader:!1})})}},{key:"render",value:function(){var e=this.props,t=e.header,n=e.buttonText;return r.a.createElement("div",null,r.a.createElement("h2",null,t),this.state.warningMessage.length>0?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.warningMessage):r.a.createElement("div",null),r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},"Signup"==n&&r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"firstname"},"First Name"),r.a.createElement("input",{onChange:this.handleChange,name:"firstname",value:this.state.firstname,type:"text",className:"form-control",id:"firstname",placeholder:"Username",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lastname"},"Last Name"),r.a.createElement("input",{onChange:this.handleChange,name:"lastname",value:this.state.lastname,type:"text",className:"form-control",id:"lastname",placeholder:"Username",required:!0}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{onChange:this.handleChange,name:"username",value:this.state.username,type:"text",className:"form-control",id:"username",placeholder:"Username",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{onChange:this.handleChange,name:"password",value:this.state.password,type:"password",className:"form-control",id:"password",placeholder:"Password",required:!0})),this.state.loader?r.a.createElement(te,null):r.a.createElement("button",{type:"submit",className:"btn btn-secondary"},n)))}}]),t}(a.Component),ae=Object(f.b)(null,{signupUser:function(e,t,n,a){return function(r){return new Promise(function(s,o){(function(e,t,n,a){return U.apply(this,arguments)})(e,t,n,a).then(function(e){var t=e.data.user;r(F(t)),s()}).catch(function(e){o(e)})})}},loginUser:function(e,t){return function(n){return new Promise(function(a,r){(function(e,t){return M.apply(this,arguments)})(e,t).then(function(e){var t=e.data.user;n(F(t)),a()}).catch(function(e){r(e)})})}}})(ne),re=function(e){var t=e.match;return r.a.createElement(z.a,null,r.a.createElement(X.a,{path:"".concat(t.url,"/signup"),render:function(e){return r.a.createElement(ae,Object.assign({},e,{signup:!0,buttonText:"Signup",header:"Join in with all the Fun!"}))}}),r.a.createElement(X.a,{path:"".concat(t.url,"/login"),render:function(e){return r.a.createElement(ae,Object.assign({},e,{signup:!1,buttonText:"Signin",header:"See what's going on!"}))}}),r.a.createElement($.a,{to:"/error"}))},se="/room";function oe(){return(oe=Object(D.a)(C.a.mark(function e(t,n){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(se),e.prev=1,e.next=4,P(a,{roomname:t,description:n});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),console.log("Error has occured: "+e.t0.message),e.t0;case 11:case"end":return e.stop()}},e,this,[[1,7]])}))).apply(this,arguments)}function ce(){return(ce=Object(D.a)(C.a.mark(function e(t){var n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(se,"/search/").concat(t),e.prev=1,e.next=4,_(n);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}},e,this,[[1,7]])}))).apply(this,arguments)}function ie(){return(ie=Object(D.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(se,"/"),e.prev=1,e.next=4,_(t);case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),e.t0;case 10:case"end":return e.stop()}},e,this,[[1,7]])}))).apply(this,arguments)}function le(){return(le=Object(D.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_("".concat(se,"/").concat(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function ue(){return(ue=Object(D.a)(C.a.mark(function e(t){var n,a,r,s,o,c,i,l;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_("".concat(se,"/").concat(t,"/users"));case 3:for(n=e.sent,a=[],r=!0,s=!1,o=void 0,e.prev=8,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)l=i.value,a.push({name:"".concat(l.firstname," ").concat(l.lastname)});e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),s=!0,o=e.t0;case 16:e.prev=16,e.prev=17,r||null==c.return||c.return();case 19:if(e.prev=19,!s){e.next=22;break}throw o;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",a);case 27:throw e.prev=27,e.t1=e.catch(0),e.t1;case 30:case"end":return e.stop()}},e,this,[[0,27],[8,12,16,24],[17,,19,23]])}))).apply(this,arguments)}function me(){return(me=Object(D.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_("".concat(se,"/").concat(t,"/suggestion"));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function pe(){return(pe=Object(D.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_("".concat(se,"/").concat(t,"/status"));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function he(){return(he=Object(D.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_("".concat(se,"/join/").concat(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function fe(){return(fe=Object(D.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("".concat(se,"/").concat(t,"/initiate_vote"));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function de(){return(de=Object(D.a)(C.a.mark(function e(t,n){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("".concat(se,"/").concat(t,"/vote"),{votedFor:n});case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function ve(){return(ve=Object(D.a)(C.a.mark(function e(t){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_("".concat(se,"/").concat(t,"/votes"));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function ge(e){return function(t){return new Promise(function(n,a){""==e?function(){return ie.apply(this,arguments)}().then(function(e){console.log("getting all rooms"),console.log(e),t({type:y,rooms:e}),n(e)}).catch(function(e){return a(e)}):function(e){return ce.apply(this,arguments)}(e).then(function(e){var a=e.rooms;console.log(a),t({type:y,rooms:a}),n(a)}).catch(function(e){return a(e)})})}}var be=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.searchRooms("")}},{key:"handleSearch",value:function(e){e.preventDefault();var t=document.getElementById("searchRooms").value;this.props.searchRooms(t)}},{key:"render",value:function(){return r.a.createElement("form",{className:"form my-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{type:"text",className:"form-control shadow",id:"searchRooms",placeholder:"Search Room"})),r.a.createElement("div",{className:"col-2"},r.a.createElement("button",{type:"submit",className:"btn btn-light mb-2 btn-block shadow",onClick:this.handleSearch.bind(this)},"Search"))))}}]),t}(a.Component);var Ee=Object(f.b)(null,function(e){return{searchRooms:function(t){e(ge(t))}}})(be),ye=function(e){var t=e.id,n=e.roomname,a=e.description,s=e.createdAt,o=new Date(s);return r.a.createElement(p.a,{to:"/room/view/".concat(t),className:"list-group-item list-group-item-action flex-column align-items-start text-center shadow mb-2"},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{className:"mb-1"},n),r.a.createElement("small",null,"Created on ".concat(o.toDateString()))),r.a.createElement("p",{className:"mb-1"},a),r.a.createElement("small",null,"Room is current Open"))},we=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(e){}},{key:"render",value:function(){var e=Date.now(),t=this.props.rooms.map(function(t,n){return r.a.createElement(ye,Object.assign({},t,{today:e,key:"room-"+n}))});return r.a.createElement("div",{className:"list-group mb-2"},t)}}]),t}(a.Component);var Oe=Object(f.b)(function(e){return{rooms:e.dashboard.displayRooms}},null)(we),je=function(e){var t=e.firstName,n=e.eventToday;return r.a.createElement("div",{className:"jumbotron text-center shadow-lg"},r.a.createElement("h1",{className:"display-4"},"Hello ",t),r.a.createElement("p",{className:"lead"},"You have a meetup with ",n.name," at ",n.time),r.a.createElement("a",{className:"btn btn-secondary btn-lg",href:"#",role:"button"},"Get Updates"))},Ne=function(e){return r.a.createElement("div",{className:"jumbotron text-center shadow"},r.a.createElement("h1",{className:"display-4"},"Hey!"),r.a.createElement("p",{className:"lead"},"Let us help you plan you next get-together"),r.a.createElement(p.a,{className:"btn btn-secondary btn-lg",to:"/auth/signup",role:"button"},"Sign up!"))},ke=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:!0},this.props.firstname?r.a.createElement(je,{firstName:this.props.firstname,eventToday:{name:"Cross Country",time:"4:00 PM"}}):r.a.createElement(Ne,null),r.a.createElement(Ee,null),r.a.createElement(Oe,null))}}]),t}(a.Component);var xe=Object(f.b)(function(e){return{firstname:e.user.userData.firstname}},null)(ke),Se=function(e){var t=e.match;return r.a.createElement(z.a,null,r.a.createElement(X.a,{path:"".concat(t.url),component:xe}),r.a.createElement($.a,{to:"/error"}))},Ce=n(87);var De=Object(h.a)(Object(f.b)(function(e){return{isAuthenticated:e.user.isAuthenticated}},null)(function(e){var t=e.isAuthenticated,n=e.component,a=Object(Ce.a)(e,["isAuthenticated","component"]);return r.a.createElement(X.a,Object.assign({},a,{render:function(e){return t?r.a.createElement(n,e):r.a.createElement($.a,{to:{pathname:"/auth/login",state:{from:e.location}}})}}))}));function Ie(e){return function(t){return new Promise(function(n,a){console.log("called initiate room"),function(e){return he.apply(this,arguments)}(e).then(function(){var r=[];r.push(function(e){return le.apply(this,arguments)}(e)),r.push(t(Te(e))),r.push(function(e){return pe.apply(this,arguments)}(e)),r.push(t(function(e){return function(t,n){return new Promise(function(a,r){(function(e){return ve.apply(this,arguments)})(e).then(function(e){console.log(e);var r=!0,s=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var l=c.value;if(console.log("vote "+Object.keys(l)),l.UserId==n().user.userData.id){t(Re(!0));break}}}catch(u){s=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(s)throw o}}a(e)})})}}(e))),Promise.all(r).then(function(a){var r,s;t((r=a[0],{type:j,name:r.roomname,description:r.description,creatorID:r.creatorID})),t((s=a[2],{type:O,status:s})),"VOTING"==a[2]?t(function(e){return function(t){return new Promise(function(n,a){(function(e){return me.apply(this,arguments)})(e).then(function(e){t({type:N,suggestion:e}),n(e)}).catch(function(e){a(e)})})}}(e)).finally(function(){n()}):n()}).catch(function(e){console.log("error initating room \n ".concat(e," ")),a()})}).catch(function(e){a()})})}}function Te(e){return function(t){return new Promise(function(n,a){(function(e){return ue.apply(this,arguments)})(e).then(function(e){t({type:w,users:e}),n(e)}).catch(function(e){a(e)})})}}function Re(e){return{type:k,userVoted:e}}var Pe=n(3),_e=function(e){function t(e,n){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e,n))).handleChange=function(e){a.setState(Object(Q.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.createRoom(a.state.name,a.state.description).then(function(e){console.log(e.data.id),a.props.history.push("/room/view/".concat(e.data.id))}).catch(function(e){console.log(e)})},a.toggle=function(){a.setState({modal:!a.state.modal})},a.state={error:"",name:"",description:"",modal:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(Pe.r,{className:"mt-5"},r.a.createElement(Pe.j,{sm:"12",md:{size:6,offset:3},className:"text-center shadow pt-4 bg-dark"},r.a.createElement(Pe.n,{style:{backgroundColor:"#ADD8E6"}},r.a.createElement("h1",{className:"display-4"},"Create a Room")),r.a.createElement(Pe.n,{style:{backgroundColor:"#ADD8E6"}},this.state.error&&r.a.createElement(Pe.a,{color:"danger"},this.state.error),r.a.createElement(Pe.k,{onSubmit:this.handleSubmit},r.a.createElement(Pe.l,null,r.a.createElement(Pe.o,null," Room Name "),r.a.createElement(Pe.m,{className:"px-3",name:"name",onChange:this.handleChange,value:this.state.name,required:!0})),r.a.createElement(Pe.l,null,r.a.createElement(Pe.o,null," Room Description "),r.a.createElement(Pe.m,{className:"px-3",name:"description",onChange:this.handleChange,value:this.state.description,required:!0})),r.a.createElement(Pe.b,null,"Create!")))))}}]),t}(a.Component),Ae=Object(f.b)(null,{createRoom:function(e,t){return function(n){return new Promise(function(n,a){(function(e,t){return oe.apply(this,arguments)})(e,t).then(function(e){n(e)}).catch(function(e){console.log(e),a(e)})})}}})(_e),Ue=n(12),Me=n(28),Le=n.n(Me),Ve=function(e){var t=e.name;return r.a.createElement(Pe.c,{className:"text-center bg-transparent border-0"},r.a.createElement(Pe.g,{className:"rounded-circle",top:!0,src:"https://s3.amazonaws.com/wya-cnds/imgs/avatars/avatar-".concat(Math.floor(9*Math.random()),".png")}),r.a.createElement(Pe.d,null,r.a.createElement(Pe.i,null,t)))},Fe=function(e){var t=e.vote,n=e.name,a=e.image_url,s=e.cateogry,o=e.price,c=e.location,i=e.rating,l=e.url;return r.a.createElement(Pe.c,{className:"shadow"},r.a.createElement("div",{className:"mx-2 my-2"},r.a.createElement(Pe.g,{top:!0,width:"100%",src:a,alt:"Card image cap"})),r.a.createElement(Pe.d,{className:"text-center"},r.a.createElement(Pe.i,{className:"pb-2"},n),r.a.createElement(Le.a,null,r.a.createElement("div",{className:"position-static",style:{height:"150px"}},r.a.createElement(Pe.h,null," ",r.a.createElement("span",{className:"font-weight-bold"},"Category: ")," ",s),r.a.createElement(Pe.h,null,r.a.createElement("span",{className:"font-weight-bold"},"Price: ")," ",o),r.a.createElement(Pe.h,null,r.a.createElement("span",{className:"font-weight-bold"}," Location: ")," ",c),r.a.createElement(Pe.h,null,r.a.createElement("span",{className:"font-weight-bold"}," Rating: ")," ",i)))),r.a.createElement(Pe.f,null,r.a.createElement("div",{className:"row"},r.a.createElement(Pe.b,{className:"btn btn-primary col ml-3 mr-2",color:"success",onClick:function(){t(!0)}},"Yes!"," "),r.a.createElement("a",{className:"btn btn-primary col ml-2 mr-2 text-light",target:"_blank",color:"info",href:l},"More Info"," "),r.a.createElement(Pe.b,{className:"btn btn-primary col mr-3 ml-2",color:"danger",onClick:function(){t(!1)}},"No"))))},Ge=n(86),qe=function(e){var t=e.username,n=e.message;return console.log("creating message comp"),console.log("".concat(t," : ").concat(n)),r.a.createElement(Pe.q,{className:"mb-2 mx-2"},"".concat(t,": ").concat(n))},He=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleKeyPress=function(e){"Enter"==e.key&&(console.log("enter pressed"),n.sendMessage(n.state.message),n.setState(Object(Ue.a)({},n.state,{message:""})))},n.handleChange=function(e){n.setState(Object(Q.a)({},e.target.name,e.target.value))},n.addMessage=function(e,t){n.setState({messageHistroy:Object(Ge.a)(n.state.messageHistroy).concat([r.a.createElement(qe,{username:e,message:t})])})},n.sendMessage=function(e){n.props.socket.emit("message",{name:n.props.name,message:e})},n.state={message:"",messageHistroy:[]},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("message",function(t){var n=t.name,a=t.message;e.addMessage(n,a)})}},{key:"render",value:function(){return r.a.createElement("div",{className:!0},r.a.createElement(Le.a,null,r.a.createElement("div",{className:"position-static border-left bg-transparent",style:{height:"620px"}},r.a.createElement(Pe.p,null,this.state.messageHistroy))),r.a.createElement(Pe.m,{name:"message",onChange:this.handleChange,className:"my-3",placeholder:"Type in a message and press Enter",value:this.state.message,onKeyPress:this.handleKeyPress}))}}]),t}(a.Component),Je=Object(f.b)(function(e){return{name:e.user.userData.firstname}},null)(He),We=function(e){var t=e.userlist.map(function(e,t){return r.a.createElement(Ve,{key:"user".concat(t),name:e.name})});return r.a.createElement(Le.a,{option:{suppressScrollX:!0,wheelPropagation:!1}},r.a.createElement("div",{className:"position-static",style:{height:"150px"}},r.a.createElement(Pe.e,null,t)))},Ye=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).initiateVote=function(){n.setState({loading:!0}),n.props.initiateVote(n.props.match.params.roomID).then(function(){console.log("Done"),n.props.socket.emit("startVoting")}).finally(function(){n.setState({loading:!1})})},n.voteSuggestion=function(e){n.props.voteForSuggestion(n.props.match.params.roomID,e)},n.state={loading:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),this.props.initiateRoom(this.props.match.params.roomID).then(function(){console.log("resolved"),e.props.socket.emit("joinRoom",e.props.match.params.roomID),e.props.socket.on("startVoting",function(){e.props.initiateRoom(e.props.match.params.roomID)}),e.props.socket.on("userJoined",function(){e.props.updateUserList(e.props.match.params.roomID)})}).finally(function(){e.setState({loading:!1})})}},{key:"componentWillUnmount",value:function(){this.props.socket.emit("leaveRoom")}},{key:"render",value:function(){return this.state.loading?r.a.createElement(te,null):r.a.createElement("div",null,r.a.createElement("div",{className:"border-bottom text-center border-secondary pb-2 my-2"},r.a.createElement("h1",{className:"display-4"},this.props.name),r.a.createElement("p",{className:""},this.props.description),this.props.creatorID==this.props.self.id&&"VOTING"!=this.props.state&&r.a.createElement(Pe.b,{onClick:this.initiateVote}," Initiate Vote ")),r.a.createElement(Pe.r,null,r.a.createElement(Pe.j,null,r.a.createElement(We,{userlist:this.props.users})),r.a.createElement(Pe.j,{className:"col position-static"},"VOTING"!=this.props.state||this.props.userVoted?r.a.createElement(Je,{socket:this.props.socket}):r.a.createElement(Fe,{vote:this.voteSuggestion,name:this.props.suggestion.name,image_url:this.props.suggestion.image_url,cateogry:this.props.suggestion.categories[0].title,price:this.props.suggestion.price,location:"".concat(this.props.suggestion.location.display_address[0],", ").concat(this.props.suggestion.location.display_address[1]),rating:this.props.suggestion.rating,url:this.props.suggestion.url}))))}}]),t}(a.Component);var Be=Object(f.b)(function(e){return Object(Ue.a)({self:e.user.userData,socket:e.global.socket},e.room)},{initiateRoom:Ie,initiateVote:function(e){return function(t){return new Promise(function(n,a){(function(e){return fe.apply(this,arguments)})(e).then(function(a){t(Ie(e)).then(function(){n()})}).catch(function(e){console.log("error initiating vote"),a(e)})})}},updateUserList:Te,voteForSuggestion:function(e,t){return function(n){return new Promise(function(a,r){(function(e,t){return de.apply(this,arguments)})(e,t).then(function(){n(Re(!0)),a()})})}}})(Ye),Ke=function(e){var t=e.match;return r.a.createElement(z.a,null,r.a.createElement(De,{path:"".concat(t.url,"/create"),component:Ae}),r.a.createElement(De,{path:"".concat(t.url,"/view/:roomID"),component:Be}),r.a.createElement($.a,{to:"/error"}))},ze=n(24);function Xe(e){return function(t){return new Promise(function(n,a){P("/user/interest",{interests:e}).then(function(a){var r=a.interest;console.log(e),t(function(e){return{type:b,interests:e}}(r)),n(r)}).catch(function(e){console.log(e),a()})})}}function $e(e){return function(t){return new Promise(function(n,a){P("/user/availability",{availability:e}).then(function(e){var a=e.avail;t({type:E,availability:a}),n(a)}).catch(function(e){console.error(e),a()})})}}var Qe=n(88),Ze=n(80),et=n.n(Ze),tt=function(e){function t(e,n){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e,n))).handleClick=function(e){var t=a.state.interests;a.props.postInterests(t);var n=a.state.time;a.props.postAvailablity(n),console.log(n)},a.handleTimeClick=function(){var e=a.state.count;console.log(e);var t=a.state.timeComponents;t.push(r.a.createElement("div",{style:{float:"center",width:"17%",marginLeft:"41%"}},r.a.createElement(et.a,{onChange:function(t){a.what(t,e)},timeFormat:"hh:mm a"}),r.a.createElement("br",null)));var n=a.state.time;n.push([0,0]),a.setState({count:e+1,timeComponents:t,time:n})},a.what=function(e,t){console.log(e),console.log(t),a.state.time[t]=[e.start,e.end]},a.handleChange=a.handleChange.bind(Object(ze.a)(Object(ze.a)(a))),a.setState=a.setState.bind(Object(ze.a)(Object(ze.a)(a))),a.state={interests:[],time:[],timeComponents:[],count:0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({value:[]});for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);this.setState({value:t})}},{key:"render",value:function(){var e=this.props.suggestedInterests.map(function(e,t){return{value:e,label:e}});return console.log(e),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",{className:"Jumbotron Jumbotron-fluid",style:{height:"150px",backgroundColor:"#E6E6FA"}},r.a.createElement("h1",{className:"display-4"},"Set Up Your Profile")),r.a.createElement("div",{className:"Jumbotron",style:{backgroundColor:"#E6E6FA"}},r.a.createElement("h3",{style:{color:"black"}}," What are your interests? "),r.a.createElement("div",{className:"FormGroup"},r.a.createElement("div",{className:"Row show-grid"},r.a.createElement("div",{className:"Col",md:12,sm:12},r.a.createElement("div",{style:{float:"center",width:"50%",marginLeft:"25%"}},r.a.createElement(Qe.a,{isMulti:!0,name:"colors",options:e,className:"basic-multi-select",classNamePrefix:"select",onChange:this.handleChange}))))),r.a.createElement("br",null),r.a.createElement("h3",{style:{color:"black"}}," What times are you available? "),r.a.createElement("times",null,this.state.timeComponents),r.a.createElement("br",null),r.a.createElement("button",{type:"button",class:"btn btn-info",onClick:this.handleTimeClick.bind(this)},"Add time"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"button",class:"btn btn-primary btn-lg",style:{background:"black"},onClick:this.handleClick.bind(this)},"Save")))}}]),t}(a.Component);var nt=Object(f.b)(function(e){return{suggestedInterests:e.user.suggestedInterests}},function(e){return{postInterests:Xe,postAvailablity:$e,handleSuggestInterests:function(t){return e(function(e){var t=["art","automotive","beauty","food","drinks","sports","technology"];return console.log("suggested: "+t),{type:g,suggestedInterests:t}}())}}})(tt),at=function(e){var t=e.match;return r.a.createElement(z.a,null,r.a.createElement(X.a,{path:"".concat(t.url,"/edit"),component:nt}),r.a.createElement($.a,{to:"/error"}))},rt=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(z.a,null,r.a.createElement(X.a,{path:"/auth",component:re}),r.a.createElement(X.a,{path:"/room",component:Ke}),r.a.createElement(X.a,{path:"/profile",component:at}),r.a.createElement(X.a,{path:"/",component:Se}),r.a.createElement($.a,{to:"/error"}))}}]),t}(a.Component),st=Object(h.a)(rt),ot=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({loading:!0}),this.props.initiateUser().finally(function(){e.setState({loading:!1})}),this.props.connecToSocket()}},{key:"render",value:function(){return r.a.createElement("div",null,!this.state.loading&&r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement("div",{id:"main",className:"container"},r.a.createElement(st,null))))}}]),t}(a.Component),ct=Object(h.a)(Object(f.b)(null,{initiateUser:function(){return function(e){return new Promise(function(t,n){(function(){return V.apply(this,arguments)})().then(function(n){e(F(n)),t()}).catch(function(e){console.log("Unauthorized"),n()})})}},connecToSocket:function(){var e=B()(K);return{type:x,socket:e}}})(ot));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var it=n(182),lt=n(21),ut={suggestedInterests:["art","automotive","beauty","food","drinks","sports","technology"],userData:{},isAuthenticated:!1},mt={displayRooms:[],upcomingEvent:{name:"Cross Country",time:"4:00 PM"}},pt={users:[],suggestion:{},name:"",description:"",creatorID:"",state:"",votes:"",userVoted:!1},ht={socket:null},ft=Object(lt.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(Ue.a)({},e,{isAuthenticated:Object.keys(t.userData).length>0,userData:t.userData});case v:return ut;case g:return Object(Ue.a)({},e,{suggestedInterests:t.suggestedInterests});case b:return Object(Ue.a)({},e,{userData:Object(Ue.a)({},e.userData,{interests:t.interests})});case E:return Object(Ue.a)({},e,{userData:Object(Ue.a)({},e.userData,{availability:t.availability})});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(Ue.a)({},e,{displayRooms:t.rooms});default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(Ue.a)({},e,{users:t.users});case k:return Object(Ue.a)({},e,{userVoted:t.userVoted});case j:return Object(Ue.a)({},e,{name:t.name,description:t.description,creatorID:t.creatorID});case O:return Object(Ue.a)({},e,{state:t.status});case N:return Object(Ue.a)({},e,{suggestion:t.suggestion});default:return e}},global:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(Ue.a)({},e,{socket:t.socket});default:return e}}}),dt=n(84);var vt=Object(lt.e)(ft,Object(lt.d)(Object(lt.a)(dt.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));o.a.render(r.a.createElement(f.a,{store:vt},r.a.createElement(it.a,null,r.a.createElement(ct,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,n){e.exports=n(179)},94:function(e,t,n){}},[[89,2,1]]]);
//# sourceMappingURL=main.9d4e8241.chunk.js.map